{"paragraphs":[{"text":"%md\n### SMV(支持向量机)简介\n支持向量机（Support Vector Machine, SVM）是一类按监督学习（supervised learning）方式对数据进行二元分类（binary classification）的广义线性分类器（generalized linear classifier），其决策边界是对学习样本求解的最大边距超平面（maximum-margin hyperplane）。\n\nSVM使用铰链损失函数（hinge loss）计算经验风险（empirical risk）并在求解系统中加入了正则化项以优化结构风险（structural risk），是一个具有稀疏性和稳健性的分类器 。SVM可以通过核方法（kernel method）进行非线性分类，是常见的核学习（kernel learning）方法之一 。\n\nSVM被提出于1964年，在二十世纪90年代后得到快速发展并衍生出一系列改进和扩展算法，在人像识别（face recognition）、文本分类（text categorization）等模式识别（pattern recognition）问题中有得到应用 。","user":"anonymous","dateUpdated":"2019-07-15T10:27:42+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>SMV(支持向量机)简介</h3>\n<p>支持向量机（Support Vector Machine, SVM）是一类按监督学习（supervised learning）方式对数据进行二元分类（binary classification）的广义线性分类器（generalized linear classifier），其决策边界是对学习样本求解的最大边距超平面（maximum-margin hyperplane）。</p>\n<p>SVM使用铰链损失函数（hinge loss）计算经验风险（empirical risk）并在求解系统中加入了正则化项以优化结构风险（structural risk），是一个具有稀疏性和稳健性的分类器 。SVM可以通过核方法（kernel method）进行非线性分类，是常见的核学习（kernel learning）方法之一 。</p>\n<p>SVM被提出于1964年，在二十世纪90年代后得到快速发展并衍生出一系列改进和扩展算法，在人像识别（face recognition）、文本分类（text categorization）等模式识别（pattern recognition）问题中有得到应用 。</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1563153254483_-108229691","id":"20190715-091414_408094646","dateCreated":"2019-07-15T09:14:14+0800","dateStarted":"2019-07-15T10:27:42+0800","dateFinished":"2019-07-15T10:27:42+0800","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3027"},{"text":"import org.apache.spark.mllib.classification.{SVMModel, SVMWithSGD}\nimport org.apache.spark.mllib.evaluation.BinaryClassificationMetrics\nimport org.apache.spark.mllib.util.MLUtils","user":"anonymous","dateUpdated":"2019-07-15T10:27:42+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.mllib.classification.{SVMModel, SVMWithSGD}\nimport org.apache.spark.mllib.evaluation.BinaryClassificationMetrics\nimport org.apache.spark.mllib.util.MLUtils\n"}]},"apps":[],"jobName":"paragraph_1563147976719_2067110859","id":"20190715-074616_973299943","dateCreated":"2019-07-15T07:46:16+0800","dateStarted":"2019-07-15T10:27:42+0800","dateFinished":"2019-07-15T10:27:42+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3028"},{"title":"加载libsvm的实验数据","text":"// Load training data in LIBSVM format.\nval data = MLUtils.loadLibSVMFile(sc, \"hdfs://master:9000/data/mllib/sample_libsvm_data.txt\")\n","user":"anonymous","dateUpdated":"2019-07-15T10:27:43+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"data: org.apache.spark.rdd.RDD[org.apache.spark.mllib.regression.LabeledPoint] = MapPartitionsRDD[538] at map at MLUtils.scala:86\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://master:4040/jobs/job?id=228"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1563147991638_460187149","id":"20190715-074631_787318218","dateCreated":"2019-07-15T07:46:31+0800","dateStarted":"2019-07-15T10:27:43+0800","dateFinished":"2019-07-15T10:27:44+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3029"},{"title":"将数据分成两份，60%做训练集，40%做测试集","text":"// Split data into training (60%) and test (40%).\nval splits = data.randomSplit(Array(0.6, 0.4), seed = 11L)\nval training = splits(0).cache()\nval test = splits(1)\n","user":"anonymous","dateUpdated":"2019-07-15T10:27:44+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"splits: Array[org.apache.spark.rdd.RDD[org.apache.spark.mllib.regression.LabeledPoint]] = Array(MapPartitionsRDD[539] at randomSplit at <console>:55, MapPartitionsRDD[540] at randomSplit at <console>:55)\ntraining: org.apache.spark.rdd.RDD[org.apache.spark.mllib.regression.LabeledPoint] = MapPartitionsRDD[539] at randomSplit at <console>:55\ntest: org.apache.spark.rdd.RDD[org.apache.spark.mllib.regression.LabeledPoint] = MapPartitionsRDD[540] at randomSplit at <console>:55\n"}]},"apps":[],"jobName":"paragraph_1563148082507_947272383","id":"20190715-074802_991337806","dateCreated":"2019-07-15T07:48:02+0800","dateStarted":"2019-07-15T10:27:44+0800","dateFinished":"2019-07-15T10:27:45+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3030"},{"title":"用SVM训练模型","text":"// Run training algorithm to build the model\nval numIterations = 100\nval model = SVMWithSGD.train(training, numIterations)\n","user":"anonymous","dateUpdated":"2019-07-15T10:27:45+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"numIterations: Int = 100\nmodel: org.apache.spark.mllib.classification.SVMModel = org.apache.spark.mllib.classification.SVMModel: intercept = 0.0, numFeatures = 692, numClasses = 2, threshold = 0.0\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://master:4040/jobs/job?id=229","http://master:4040/jobs/job?id=230","http://master:4040/jobs/job?id=231","http://master:4040/jobs/job?id=232","http://master:4040/jobs/job?id=233","http://master:4040/jobs/job?id=234","http://master:4040/jobs/job?id=235","http://master:4040/jobs/job?id=236","http://master:4040/jobs/job?id=237","http://master:4040/jobs/job?id=238","http://master:4040/jobs/job?id=239","http://master:4040/jobs/job?id=240","http://master:4040/jobs/job?id=241","http://master:4040/jobs/job?id=242","http://master:4040/jobs/job?id=243","http://master:4040/jobs/job?id=244","http://master:4040/jobs/job?id=245","http://master:4040/jobs/job?id=246","http://master:4040/jobs/job?id=247","http://master:4040/jobs/job?id=248","http://master:4040/jobs/job?id=249","http://master:4040/jobs/job?id=250","http://master:4040/jobs/job?id=251","http://master:4040/jobs/job?id=252","http://master:4040/jobs/job?id=253","http://master:4040/jobs/job?id=254","http://master:4040/jobs/job?id=255","http://master:4040/jobs/job?id=256","http://master:4040/jobs/job?id=257","http://master:4040/jobs/job?id=258","http://master:4040/jobs/job?id=259","http://master:4040/jobs/job?id=260","http://master:4040/jobs/job?id=261","http://master:4040/jobs/job?id=262","http://master:4040/jobs/job?id=263","http://master:4040/jobs/job?id=264","http://master:4040/jobs/job?id=265","http://master:4040/jobs/job?id=266","http://master:4040/jobs/job?id=267","http://master:4040/jobs/job?id=268","http://master:4040/jobs/job?id=269","http://master:4040/jobs/job?id=270","http://master:4040/jobs/job?id=271","http://master:4040/jobs/job?id=272","http://master:4040/jobs/job?id=273","http://master:4040/jobs/job?id=274","http://master:4040/jobs/job?id=275","http://master:4040/jobs/job?id=276","http://master:4040/jobs/job?id=277","http://master:4040/jobs/job?id=278","http://master:4040/jobs/job?id=279","http://master:4040/jobs/job?id=280","http://master:4040/jobs/job?id=281","http://master:4040/jobs/job?id=282","http://master:4040/jobs/job?id=283","http://master:4040/jobs/job?id=284","http://master:4040/jobs/job?id=285","http://master:4040/jobs/job?id=286","http://master:4040/jobs/job?id=287","http://master:4040/jobs/job?id=288","http://master:4040/jobs/job?id=289","http://master:4040/jobs/job?id=290","http://master:4040/jobs/job?id=291","http://master:4040/jobs/job?id=292","http://master:4040/jobs/job?id=293","http://master:4040/jobs/job?id=294","http://master:4040/jobs/job?id=295","http://master:4040/jobs/job?id=296","http://master:4040/jobs/job?id=297","http://master:4040/jobs/job?id=298","http://master:4040/jobs/job?id=299","http://master:4040/jobs/job?id=300","http://master:4040/jobs/job?id=301","http://master:4040/jobs/job?id=302","http://master:4040/jobs/job?id=303","http://master:4040/jobs/job?id=304","http://master:4040/jobs/job?id=305","http://master:4040/jobs/job?id=306","http://master:4040/jobs/job?id=307","http://master:4040/jobs/job?id=308","http://master:4040/jobs/job?id=309","http://master:4040/jobs/job?id=310","http://master:4040/jobs/job?id=311","http://master:4040/jobs/job?id=312","http://master:4040/jobs/job?id=313","http://master:4040/jobs/job?id=314","http://master:4040/jobs/job?id=315","http://master:4040/jobs/job?id=316","http://master:4040/jobs/job?id=317","http://master:4040/jobs/job?id=318","http://master:4040/jobs/job?id=319","http://master:4040/jobs/job?id=320","http://master:4040/jobs/job?id=321","http://master:4040/jobs/job?id=322","http://master:4040/jobs/job?id=323","http://master:4040/jobs/job?id=324","http://master:4040/jobs/job?id=325","http://master:4040/jobs/job?id=326","http://master:4040/jobs/job?id=327","http://master:4040/jobs/job?id=328","http://master:4040/jobs/job?id=329","http://master:4040/jobs/job?id=330","http://master:4040/jobs/job?id=331"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1563148094362_2058826081","id":"20190715-074814_908318956","dateCreated":"2019-07-15T07:48:14+0800","dateStarted":"2019-07-15T10:27:45+0800","dateFinished":"2019-07-15T10:27:54+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3031"},{"text":"// Clear the default threshold.\nmodel.clearThreshold()","user":"anonymous","dateUpdated":"2019-07-15T10:27:54+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res11: model.type = org.apache.spark.mllib.classification.SVMModel: intercept = 0.0, numFeatures = 692, numClasses = 2, threshold = None\n"}]},"apps":[],"jobName":"paragraph_1563148102405_1321223403","id":"20190715-074822_1685569836","dateCreated":"2019-07-15T07:48:22+0800","dateStarted":"2019-07-15T10:27:54+0800","dateFinished":"2019-07-15T10:27:55+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3032"},{"title":"用模型来预测测试数据","text":"// Compute raw scores on the test set.\nval scoreAndLabels = test.map { point =>\n  val score = model.predict(point.features)\n  (score, point.label)\n}\n","user":"anonymous","dateUpdated":"2019-07-15T10:27:55+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"scoreAndLabels: org.apache.spark.rdd.RDD[(Double, Double)] = MapPartitionsRDD[744] at map at <console>:58\n"}]},"apps":[],"jobName":"paragraph_1563153074743_-701476694","id":"20190715-091114_613748874","dateCreated":"2019-07-15T09:11:14+0800","dateStarted":"2019-07-15T10:27:55+0800","dateFinished":"2019-07-15T10:27:55+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3033"},{"title":"计算评价指标，这里使用ROC来评价","text":"// Get evaluation metrics.\nval metrics = new BinaryClassificationMetrics(scoreAndLabels)\nval auROC = metrics.areaUnderROC()\n","user":"anonymous","dateUpdated":"2019-07-15T10:27:55+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"metrics: org.apache.spark.mllib.evaluation.BinaryClassificationMetrics = org.apache.spark.mllib.evaluation.BinaryClassificationMetrics@19d18879\nauROC: Double = 1.0\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://master:4040/jobs/job?id=332","http://master:4040/jobs/job?id=333","http://master:4040/jobs/job?id=334","http://master:4040/jobs/job?id=335"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1563153084790_1402366588","id":"20190715-091124_1164875014","dateCreated":"2019-07-15T09:11:24+0800","dateStarted":"2019-07-15T10:27:55+0800","dateFinished":"2019-07-15T10:27:58+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3034"},{"text":"println(\"Area under ROC = \" + auROC)","user":"anonymous","dateUpdated":"2019-07-15T10:27:58+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Area under ROC = 1.0\n"}]},"apps":[],"jobName":"paragraph_1563153092597_-859107303","id":"20190715-091132_993943999","dateCreated":"2019-07-15T09:11:32+0800","dateStarted":"2019-07-15T10:27:58+0800","dateFinished":"2019-07-15T10:27:58+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3035"},{"user":"anonymous","dateUpdated":"2019-07-15T10:27:58+0800","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1563153102313_304010122","id":"20190715-091142_1806755740","dateCreated":"2019-07-15T09:11:42+0800","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:3036"}],"name":"03.机器学习算法(SVM)示例","id":"2EJ4QRA9G","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}